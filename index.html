<!doctype html>

<html lang="en">
<head>
    <meta charset="utf-8">
    <!-- TODO update the title according to the selected options -->
    <title>1337</title><style type="text/css">body{
margin:40px auto;
max-width:650px;
line-height:1.6;
font-size:18px;
color:#eee;
background-color:#111;
padding:0 10px
}
textarea, output, button, select {
color:#eee;
background-color:#111;
}
</style>
</head>

<body>
  <div>
    <textarea id="input" placeholder="type something in here" rows="8" cols="80"></textarea>
  </div>
  <div>
    <pre id="output"></pre>
  </div>
</body>

<script type="text/javascript">
  // TODO more replacements and allow selecting which are applied
  let replacements = [
    [/i/gi, "1"],
    // Only replace "you" with "u" when it's the start of the string, or
    // there's whitespace before it, and there's either whitespace or
    // punctuation, or the end of the string after it.
    [/(^|\s)you([\s,\.!?'"]|$)/gi, "$1u$2"],
    [/a/gi, "4"],
    [/e/gi, "3"],
    [/o/gi, "0"],
    [/t/gi, "7"],
  ]

  const input = document.getElementById("input");
  const output = document.getElementById("output");

  input.addEventListener("input", () => {
    let s = input.value

    for ([from, to] of replacements) {
      s = s.replaceAll(from, to)
    }

    output.innerText = s
  })
</script>

</html>
